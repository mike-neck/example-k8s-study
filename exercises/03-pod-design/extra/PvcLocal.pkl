module extra.PvLocal extends "./Base.pkl"

import "package://pkg.pkl-lang.org/pkl-k8s/k8s@1.1.1#/api/core/v1/PersistentVolumeClaim.pkl"

local accessMode = AccessMode
local objectNames: ObjectNameContainer = ObjectNames

local pvc = new PersistentVolumeClaim {
  metadata {
    name = objectNames.pvcName
    labels  = (objectNames.labels) {}
  }
  spec {
    accessModes {
      accessMode.ReadWriteOnce
    }
    volumeMode = "Filesystem"
    resources {
      requests {
        ["storage"] = 2.mib
      }
    }
    storageClassName = "local-storage"
    selector {
      matchLabels = (objectNames.labels) {}
    }
  }
}


output {
  value = List(pvc)
}
